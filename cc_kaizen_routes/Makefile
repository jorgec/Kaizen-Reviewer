.PHONY: help install test clean generate-analytics generate-dashboard generate-list

# Default target
help:
	@echo "Kaizen Route Cookiecutter Template"
	@echo ""
	@echo "Available targets:"
	@echo "  make install              - Install cookiecutter and dependencies"
	@echo "  make test                 - Run automated tests"
	@echo "  make clean                - Clean up test artifacts"
	@echo "  make generate-analytics   - Generate example analytics route"
	@echo "  make generate-dashboard   - Generate example dashboard route"
	@echo "  make generate-list        - Generate example list route"
	@echo ""
	@echo "Manual generation:"
	@echo "  cd .. && cookiecutter cc_kaizen_routes"

# Install dependencies
install:
	@echo "ğŸ“¦ Installing cookiecutter and dependencies..."
	pip install -r requirements.txt
	@echo "âœ… Installation complete"

# Run tests
test:
	@echo "ğŸ§ª Running template tests..."
	./test_template.sh

# Clean test artifacts
clean:
	@echo "ğŸ§¹ Cleaning up..."
	rm -rf example_analytics example_dashboard example_list
	rm -rf test_* my_feature
	find . -type d -name "__pycache__" -exec rm -rf {} + 2>/dev/null || true
	find . -type f -name "*.pyc" -delete 2>/dev/null || true
	@echo "âœ… Cleanup complete"

# Generate example analytics route
generate-analytics:
	@echo "ğŸ“ Generating analytics route example..."
	cd .. && cookiecutter cc_kaizen_routes --no-input --config-file cc_kaizen_routes/examples/analytics_route.yaml
	@echo "âœ… Generated: example_analytics/"
	@echo "   Move with: mv example_analytics src/routes/"

# Generate example dashboard route
generate-dashboard:
	@echo "ğŸ“ Generating dashboard route example..."
	cd .. && cookiecutter cc_kaizen_routes --no-input --config-file cc_kaizen_routes/examples/dashboard_route.yaml
	@echo "âœ… Generated: example_dashboard/"
	@echo "   Move with: mv example_dashboard src/routes/"

# Generate example list route
generate-list:
	@echo "ğŸ“ Generating list route example..."
	cd .. && cookiecutter cc_kaizen_routes --no-input --config-file cc_kaizen_routes/examples/simple_list.yaml
	@echo "âœ… Generated: example_list/"
	@echo "   Move with: mv example_list src/routes/"
